<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å¤§å± - æ™ºèƒ½åœè½¦ç®¡ç†ä¸­å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Noto Sans SC', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; background: linear-gradient(135deg, #0f172a, #1e293b); overflow: hidden; }
        .big-number { font-size: 3.5rem; font-weight: 700; color: #60a5fa; text-shadow: 0 0 20px rgba(96, 165, 250, 0.5); }
        .card { background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(96, 165, 250, 0.3); backdrop-filter: blur(10px); }
        .title { color: #60a5fa; text-shadow: 0 0 10px rgba(96, 165, 250, 0.3); font-size: 2.5rem; }
        .pulse-dot { width: 12px; height: 12px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .chart-container { height: calc(100% - 60px); min-height: 250px; }
        .grid-container { height: 100%; display: grid; grid-template-columns: 1fr 2fr 1fr; grid-template-rows: 80px 1fr 1fr; gap: 16px; padding: 16px; }
        .header { border-bottom: 2px solid rgba(96, 165, 250, 0.5); grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .left-panel { grid-column: 1; grid-row: 2 / -1; display: flex; flex-direction: column; gap: 16px; }
        .center-panel { grid-column: 2; grid-row: 2 / -1; display: flex; flex-direction: column; gap: 16px; }
        .right-panel { grid-column: 3; grid-row: 2 / -1; display: flex; flex-direction: column; gap: 16px; }
        .panel-card { flex: 1; min-height: 200px; display: flex; flex-direction: column; }
        .panel-title { font-size: 1.25rem; font-weight: 600; color: #60a5fa; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(96, 165, 250, 0.3); }
        .metric-number { font-size: 2.5rem; font-weight: 700; text-align: center; margin: auto 0; }
        .status-indicator { display: inline-flex; align-items: center; gap: 8px; }
        @media (max-width: 1200px) { .grid-container { grid-template-columns: 1fr; grid-template-rows: auto; } .left-panel, .center-panel, .right-panel { grid-column: 1; } }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- ç½‘æ ¼å®¹å™¨ -->
    <div class="grid-container">
        <!-- å¤´éƒ¨ -->
        <header class="header bg-slate-900/90">
            <div class="flex items-center space-x-4">
                <div class="text-3xl">ğŸ…¿ï¸</div>
                <h1 class="title">æ™ºèƒ½åœè½¦ç®¡ç† æ•°æ®å¤§å±</h1>
            </div>
            <div class="flex items-center space-x-6">
                <div class="status-indicator">
                    <div class="pulse-dot"></div>
                    <span class="text-base">ç³»ç»Ÿè¿è¡Œä¸­</span>
                </div>
                <div class="text-xl font-light" id="current-time"></div>
            </div>
        </header>

        <!-- å·¦ä¾§æ  -->
        <div class="left-panel">
            <!-- æ ¸å¿ƒæŒ‡æ ‡ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">æ ¸å¿ƒè¿è¡ŒæŒ‡æ ‡</h3>
                <div class="flex-1 flex flex-col justify-center">
                    <div class="text-center">
                        <div class="metric-number" id="total-parking-lots">169</div>
                        <div class="text-sm text-gray-400 mt-1">åœ¨çº¿åœè½¦åœº</div>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-4">
                        <div class="text-center p-2 bg-slate-800/50 rounded">
                            <div class="text-xl font-bold text-green-400" id="total-spots">3,156</div>
                            <div class="text-xs text-gray-400">æ€»è½¦ä½</div>
                        </div>
                        <div class="text-center p-2 bg-slate-800/50 rounded">
                            <div class="text-xl font-bold text-yellow-400" id="available-spots">2,847</div>
                            <div class="text-xs text-gray-400">ç©ºé—²</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä»Šæ—¥æ”¶å…¥ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">ä»Šæ—¥æ”¶å…¥</h3>
                <div class="flex-1 flex flex-col justify-center">
                    <div class="text-center">
                        <div class="metric-number text-green-400" id="daily-revenue">Â¥67,892</div>
                        <div class="text-sm text-gray-400 mt-1">è¾ƒæ˜¨æ—¥ +12.5%</div>
                    </div>
                </div>
            </div>

            <!-- è®¾å¤‡çŠ¶æ€ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">è®¾å¤‡çŠ¶æ€</h3>
                <div class="flex-1 flex flex-col justify-center">
                    <div class="grid grid-cols-2 gap-3 text-center">
                        <div class="p-3 bg-green-900/30 rounded">
                            <div class="text-xl font-bold text-green-400" id="online-devices">347</div>
                            <div class="text-xs text-gray-400">åœ¨çº¿</div>
                        </div>
                        <div class="p-3 bg-red-900/30 rounded">
                            <div class="text-xl font-bold text-red-400" id="offline-devices">12</div>
                            <div class="text-xs text-gray-400">ç¦»çº¿</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸­é—´æ  -->
        <div class="center-panel">
            <!-- çƒ­åŠ›å›¾ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">åœè½¦åœºå®æ—¶çƒ­åŠ›å›¾</h3>
                <div class="flex-1">
                    <div class="chart-container" id="heatmap-chart"></div>
                </div>
            </div>

            <!-- æµé‡è¶‹åŠ¿ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">24å°æ—¶è½¦æµè¶‹åŠ¿</h3>
                <div class="flex-1">
                    <div class="chart-container" id="traffic-flow-chart"></div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§æ  -->
        <div class="right-panel">
            <!-- è½¦ä½åˆ†å¸ƒ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">è½¦ä½ä½¿ç”¨åˆ†å¸ƒ</h3>
                <div class="flex-1">
                    <div class="chart-container" id="usage-pie-chart"></div>
                </div>
            </div>

            <!-- çƒ­é—¨åœè½¦åœº -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">ä»Šæ—¥çƒ­é—¨åœè½¦åœº</h3>
                <div class="flex-1 overflow-y-auto space-y-2" id="top-parking-lots">
                    <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded text-sm">
                        <div>
                            <div class="font-medium">æœºç”µå­¦é¦†åœè½¦åœº</div>
                            <div class="text-xs text-gray-400">åˆ©ç”¨ç‡ 92%</div>
                        </div>
                        <div class="text-green-400 font-bold">Â¥8,234</div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded text-sm">
                        <div>
                            <div class="font-medium">å»ºç­‘å­¦é¦†åœè½¦åœº</div>
                            <div class="text-xs text-gray-400">åˆ©ç”¨ç‡ 87%</div>
                        </div>
                        <div class="text-green-400 font-bold">Â¥7,156</div>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded text-sm">
                        <div>
                            <div class="font-medium">å¤§æˆåœè½¦åœº</div>
                            <div class="text-xs text-gray-400">åˆ©ç”¨ç‡ 78%</div>
                        </div>
                        <div class="text-green-400 font-bold">Â¥6,892</div>
                    </div>
                </div>
            </div>

            <!-- å®æ—¶å‘Šè­¦ -->
            <div class="card panel-card rounded-xl p-4">
                <h3 class="panel-title">å®æ—¶å‘Šè­¦</h3>
                <div class="flex-1 overflow-y-auto space-y-2" id="alerts-list">
                    <div class="flex items-start space-x-2 p-2 bg-orange-900/50 rounded text-xs">
                        <div class="text-orange-400">âš ï¸</div>
                        <div class="flex-1">
                            <div>åœè½¦åœºA-101é“é—¸å¼‚å¸¸</div>
                            <div class="text-gray-400">2åˆ†é’Ÿå‰</div>
                        </div>
                    </div>
                    <div class="flex items-start space-x-2 p-2 bg-yellow-900/50 rounded text-xs">
                        <div class="text-yellow-400">ğŸ”„</div>
                        <div class="flex-1">
                            <div>è®¾å¤‡D-305ä¼ æ„Ÿå™¨ç¦»çº¿</div>
                            <div class="text-gray-400">5åˆ†é’Ÿå‰</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
            <!-- å·¦ä¾§ -->
            <div class="col-span-3 space-y-6">
                <!-- æ ¸å¿ƒæŒ‡æ ‡ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">æ ¸å¿ƒè¿è¡ŒæŒ‡æ ‡</h3>
                    <div class="space-y-4">
                        <div class="text-center">
                            <div class="big-number" id="total-parking-lots">169</div>
                            <div class="text-gray-400">åœ¨çº¿åœè½¦åœº</div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-400" id="total-spots">3,156</div>
                                <div class="text-sm text-gray-400">æ€»è½¦ä½</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-yellow-400" id="available-spots">2,847</div>
                                <div class="text-sm text-gray-400">ç©ºé—²è½¦ä½</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ä»Šæ—¥æ”¶å…¥ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">ä»Šæ—¥æ”¶å…¥</h3>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-green-400" id="daily-revenue">Â¥67,892</div>
                        <div class="text-gray-400 mt-2">è¾ƒæ˜¨æ—¥ +12.5%</div>
                    </div>
                </div>

                <!-- å®æ—¶é€šçŸ¥ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">å®æ—¶å‘Šè­¦</h3>
                    <div class="space-y-3 max-h-48 overflow-y-auto" id="alerts-list">
                        <div class="flex items-start space-x-3 p-2 bg-orange-900/50 rounded">
                            <div class="text-orange-400">âš ï¸</div>
                            <div class="flex-1">
                                <div class="text-sm">åœè½¦åœºA-101é“é—¸å¼‚å¸¸</div>
                                <div class="text-xs text-gray-400">2åˆ†é’Ÿå‰</div>
                            </div>
                        </div>
                        <div class="flex items-start space-x-3 p-2 bg-yellow-900/50 rounded">
                            <div class="text-yellow-400">ğŸ”„</div>
                            <div class="flex-1">
                                <div class="text-sm">è®¾å¤‡D-305ä¼ æ„Ÿå™¨ç¦»çº¿</div>
                                <div class="text-xs text-gray-400">5åˆ†é’Ÿå‰</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­é—´ -->
            <div class="col-span-6 space-y-6">
                <!-- çƒ­åŠ›å›¾ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">åœè½¦åœºå®æ—¶çƒ­åŠ›å›¾</h3>
                    <div class="chart-container" id="heatmap-chart"></div>
                </div>

                <!-- æµé‡è¶‹åŠ¿ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">24å°æ—¶è½¦æµè¶‹åŠ¿</h3>
                    <div class="chart-container" id="traffic-flow-chart"></div>
                </div>
            </div>

            <!-- å³ä¾§ -->
            <div class="col-span-3 space-y-6">
                <!-- ä½¿ç”¨åˆ†å¸ƒ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">è½¦ä½ä½¿ç”¨åˆ†å¸ƒ</h3>
                    <div class="chart-container" id="usage-pie-chart"></div>
                </div>

                <!-- Topåœè½¦åœº -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">ä»Šæ—¥çƒ­é—¨åœè½¦åœº</h3>
                    <div class="space-y-3" id="top-parking-lots">
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <div>
                                <div class="font-medium">æœºç”µå­¦é¦†åœè½¦åœº</div>
                                <div class="text-sm text-gray-400">åˆ©ç”¨ç‡ 92%</div>
                            </div>
                            <div class="text-green-400 font-bold">Â¥8,234</div>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <div>
                                <div class="font-medium">å»ºç­‘å­¦é¦†åœè½¦åœº</div>
                                <div class="text-sm text-gray-400">åˆ©ç”¨ç‡ 87%</div>
                            </div>
                            <div class="text-green-400 font-bold">Â¥7,156</div>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <div>
                                <div class="font-medium">å¤§æˆåœè½¦åœº</div>
                                <div class="text-sm text-gray-400">åˆ©ç”¨ç‡ 78%</div>
                            </div>
                            <div class="text-green-400 font-bold">Â¥6,892</div>
                        </div>
                    </div>
                </div>

                <!-- è®¾å¤‡çŠ¶æ€ -->
                <div class="card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-blue-400 mb-4">è®¾å¤‡çŠ¶æ€</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-3 bg-green-900/30 rounded">
                            <div class="text-3xl text-green-400" id="online-devices">347</div>
                            <div class="text-sm text-gray-400">åœ¨çº¿è®¾å¤‡</div>
                        </div>
                        <div class="text-center p-3 bg-red-900/30 rounded">
                            <div class="text-3xl text-red-400" id="offline-devices">12</div>
                            <div class="text-sm text-gray-400">ç¦»çº¿è®¾å¤‡</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="mockData.js"></script>
    <script>
        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('current-time').textContent = timeString;
        }

        // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
        function updateRealTimeData() {
            const parkingLots = document.getElementById('total-parking-lots');
            parkingLots.textContent = 165 + Math.floor(Math.random() * 10);

            const availableSpots = document.getElementById('available-spots');
            availableSpots.textContent = (2800 + Math.floor(Math.random() * 100)).toLocaleString();

            const revenue = document.getElementById('daily-revenue');
            const newRevenue = 65000 + Math.floor(Math.random() * 8000);
            revenue.textContent = `Â¥${newRevenue.toLocaleString()}`;
        }

        // åˆå§‹åŒ–çƒ­åŠ›å›¾
        function initializeHeatmapChart() {
            const chart = echarts.init(document.getElementById('heatmap-chart'));

            const data = [];
            for (let i = 0; i < 24; i++) {
                for (let j = 0; j < 7; j++) {
                    data.push([i, j, Math.floor(Math.random() * 100)]);
                }
            }

            const option = {
                tooltip: {
                    position: 'top',
                    formatter: function(params) {
                        return `å°æ—¶: ${params.data[0]}<br/>æ˜ŸæœŸ: ${params.data[1] + 1}<br/>è½¦æµ: ${params.data[2]}`;
                    }
                },
                grid: { height: '80%', top: '10%' },
                xAxis: {
                    type: 'category',
                    data: Array.from({length: 24}, (_, i) => `${i}:00`),
                    splitArea: { show: true }
                },
                yAxis: {
                    type: 'category',
                    data: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'],
                    splitArea: { show: true }
                },
                visualMap: {
                    min: 0,
                    max: 100,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '5%',
                    inRange: {
                        color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
                    }
                },
                series: [{
                    name: 'è½¦æµçƒ­åŠ›',
                    type: 'heatmap',
                    data: data,
                    label: { show: false },
                    emphasis: { itemStyle: { shadowBlur: 10, shadowColor: 'rgba(0, 0, 0, 0.5)' } }
                }]
            };

            chart.setOption(option);
        }

        // åˆå§‹åŒ–æµé‡è¶‹åŠ¿å›¾
        function initializeTrafficFlowChart() {
            const chart = echarts.init(document.getElementById('traffic-flow-chart'));

            const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
            const trafficData = hours.map(() => 50 + Math.floor(Math.random() * 150));

            const option = {
                tooltip: { trigger: 'axis' },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: { type: 'category', boundaryGap: false, data: hours },
                yAxis: { type: 'value', axisLabel: { formatter: '{value} è¾†' } },
                series: [{
                    name: 'è½¦æµé‡',
                    type: 'line',
                    smooth: true,
                    symbol: 'none',
                    lineStyle: { color: '#60a5fa', width: 3 },
                    areaStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0, color: 'rgba(96, 165, 250, 0.3)' },
                            { offset: 1, color: 'rgba(96, 165, 250, 0.05)' }
                        ])
                    },
                    data: trafficData
                }]
            };

            chart.setOption(option);
        }

        // åˆå§‹åŒ–é¥¼å›¾
        function initializePieChart() {
            const chart = echarts.init(document.getElementById('usage-pie-chart'));

            const option = {
                tooltip: { trigger: 'item' },
                series: [{
                    name: 'è½¦ä½ä½¿ç”¨',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: { borderRadius: 10, borderColor: '#1e293b', borderWidth: 2 },
                    label: { show: false, position: 'center' },
                    emphasis: {
                        label: { show: true, fontSize: 20, fontWeight: 'bold' }
                    },
                    labelLine: { show: false },
                    data: [
                        { value: 2847, name: 'ç©ºé—²è½¦ä½', itemStyle: { color: '#10b981' } },
                        { value: 309, name: 'å·²å ç”¨è½¦ä½', itemStyle: { color: '#ef4444' } }
                    ]
                }]
            };

            chart.setOption(option);
        }

        // æ·»åŠ å‘Šè­¦
        function addAlert(message, type = 'warning') {
            const alertsContainer = document.getElementById('alerts-list');
            const icon = type === 'warning' ? 'âš ï¸' : 'ğŸ”„';
            const bgColor = type === 'warning' ? 'bg-orange-900/50' : 'bg-yellow-900/50';
            const textColor = type === 'warning' ? 'text-orange-400' : 'text-yellow-400';

            const alertDiv = document.createElement('div');
            alertDiv.className = `flex items-start space-x-3 p-2 ${bgColor} rounded`;
            alertDiv.innerHTML = `
                <div class="${textColor}">${icon}</div>
                <div class="flex-1">
                    <div class="text-sm">${message}</div>
                    <div class="text-xs text-gray-400">åˆšåˆš</div>
                </div>
            `;

            alertsContainer.insertBefore(alertDiv, alertsContainer.firstChild);

            // é™åˆ¶å‘Šè­¦æ•°é‡
            while (alertsContainer.children.length > 10) {
                alertsContainer.removeChild(alertsContainer.lastChild);
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);

            initializeHeatmapChart();
            initializeTrafficFlowChart();
            initializePieChart();

            updateRealTimeData();
            setInterval(updateRealTimeData, 5000);

            // æ¯30ç§’æ·»åŠ éšæœºå‘Šè­¦
            setInterval(() => {
                const messages = [
                    'åœè½¦åœºCåŒºè½¦ä½å ç”¨ç‡è¶…è¿‡90%',
                    'è®¾å¤‡D-403æ¸©åº¦å¼‚å¸¸ï¼Œå½“å‰45Â°C',
                    'åœè½¦åœºBåŒºç½‘ç»œå»¶è¿Ÿè¾ƒé«˜',
                    'å‘ç°å¯ç–‘è½¦è¾†åœç•™è¶…è¿‡24å°æ—¶',
                    'ç³»ç»Ÿè´Ÿè½½è¾¾åˆ°75%'
                ];
                addAlert(messages[Math.floor(Math.random() * messages.length)]);
            }, 30000);

            // å“åº”å¼
            window.addEventListener('resize', () => {
                echarts.getInstanceByDom(document.getElementById('heatmap-chart'))?.resize();
                echarts.getInstanceByDom(document.getElementById('traffic-flow-chart'))?.resize();
                echarts.getInstanceByDom(document.getElementById('usage-pie-chart'))?.resize();
            });
        });
    </script>
</body>
</html>
